@model TRAVEL_PLANNER.Models.ViewModels.SearchParameter
@using TRAVEL_PLANNER.Models.Enum

@{
    Layout = "_Search";
}

@{
    ViewData["Title"] = "Search Travel Plan";
}

@{
    List<TRAVEL_PLANNER.Models.ViewModels.ResultTravelPlan> resultTravelPlans = ViewBag.Result;

    List<TRAVEL_PLANNER.Models.ViewModels.AssignedActivityData> activities = ViewBag.Activitys;

    @if (resultTravelPlans == null)
    {
        <div class="header">
            <img src="/images/househill.jpg" alt="">
            <h2>Let's Help You Plan Your Ultimate Trip</h2>
            <hr> <br>
        </div>
        <form asp-action="SearchPlan">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group c1">
                <span>What's Your Total for the trip Budget Minus Flight?</span>
                <select asp-for="Budget" class="form-control" asp-items="Html.GetEnumSelectList<BudgetEnum>()"> </select>
                <span asp-validation-for="Budget" class="text-danger"></span>
            </div>
            <div class="form-group c2">
                <span> When Are You Looking To Travel?</span>
                <select asp-for="SeasonName" class="form-control" asp-items="ViewBag.SeasonID">
                    <option value="" disabled selected> ** Select Your Season **</option>
                </select>
                <span asp-validation-for="SeasonName" class="text-danger"></span>
            </div>
            <div class="c3">
                <span style="font-size: 23px;">
                    Would you rather?<br>
                    <span> (You can select multiple options)</span>
                </span><br>
                <div>
                    @{
                        int cnt = 0;

                        foreach (var activity in activities)
                        {
                            if (cnt++ % 1 == 0)
                            {
                                <input type="checkbox"
                                       name="selectedActivities"
                                       value="@activity.Id"
                                       @(Html.Raw(activity.Assigned ? "checked=\"checked\"" : "")) />
                                @activity.Name
                                <br />
                            }
                        }
                    }
                </div>
            </div>
            <button type="submit" value="" class="planbtn" style="display: flex;margin:0 auto;align-items:center;padding-left:10px">Find The Right Destination</button>
            <br />
            <br />
            <br />
            <br />
        </form>
    }
    else if (resultTravelPlans.Count == 0)
    {
        <div class="header">
            <img src="/images/househill.jpg" alt="">
            <h2>Let's Help You Plan Your Ultimate Trip</h2>
            <hr> <br>
        </div>

        <div class="container">
            <div class="row">
                <div class="offset-2">
                    <h1>Search Results ......</h1>

                    <h3>No Travel Place to Met Your Criteria</h3>
                </div>
            </div>
        </div>

        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
    }
    else
    {
        <div class="header">
            <img src="/images/househill.jpg" alt="">
            <h2>Let's Help You Plan Your Ultimate Trip</h2>
            <hr> <br>
        </div>

        <div class="container">
            <div class="row">
                <div class="offset-2">
                    <h1>Search Results ......</h1>
                    @foreach (var items in resultTravelPlans)
                    {
                        <div class="row">
                            <div class="col-3 col-sm-3">
                                <img class="img-fluid" src="@items.ImageUrl" />
                            </div>
                            <div class="col-7 col-sm-7">
                                <div class="row">
                                    <div class="col-12 col-sm-12">
                                        <h4>@items.Name</h4>
                                    </div>
                                    <div class="col-12 col-sm-12">
                                        <h4>@items.Country - @items.State</h4>
                                    </div>
                                    <div class="col-12 col-sm-12">
                                        <h4>Open Hours - @items.OperationHour</h4>
                                    </div>
                                    <div class="col-12 col-sm-12">
                                        <a href="@items.Url" class="btn btn-primary">Explore More</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <br />
                        <br />

                    }
                </div>
            </div>
        </div>
    }
}


<section class="footer">
    <div class="c4">
        <ul class="dwnlist">
            <li><a href="index.html"> Home</a></li>
            <li><a href="plan.html"> Services</a></li>
            <li><a href="">Become An Affliate</a></li>
        </ul>
        <div class="c5">
            <span>
                Travel Planner <br>
                <a href="">travelplanner@gmail.com</a>
            </span>
            <ul class="c6">
                <li><a href=""><img src="./images/icons8-google-48.png" alt=""></a></li>
                <li><a href=""><img src="./images/icons8-twitter-64 (1).png" alt=""></a></li>
                <li><a href=""><img src="./images/icons8-instagram-64 (1).png" alt=""></a></li>
            </ul>
        </div>
    </div>
    <div class="bottom">Copyright &copy; 2020 | Travel Planner</div>
</section>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}